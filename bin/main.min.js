!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),e.exports=n(18)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Laya.Event.CLICK,l=Laya.Event.STOPPED,u=Sail.Utils,c={},h=null,f={closeOnSide:!0,autoClose:4e3},p=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.CONFIG=f,n.popupEffect=null,n.closeEffect=null,n.resFlag="lose",n.data=e,n.init(e),n}return a(t,e),o(t,[{key:"init",value:function(e){this.size(708,278),this.mouseThrough=!0,this.on(s,this,function(){this.close()});var t=new Laya.Button("res/alert/public/btn_alert_close.png");if(t.stateNum=1,t.name="close",t.right=-30,t.top=-30,0!=e.prizeAmount&&(this.resFlag="win"),!c[this.resFlag]){var n=u.createSkeleton("res/alert/result/"+this.resFlag);n.pos(340,170),n.on(l,n,function(){"exit"!=this.status&&this.play("loop",!0)}),c[this.resFlag]=n}h||(h=new ui.Alert.ResultUI);var i=e.value;h.blockInfo.text=i.join("、"),h.blockTotal.text=(0|i[0])+(0|i[1])+(0|i[2]),h.winScore.text=e.prizeAmount,this.addChildren(c[this.resFlag],h,t)}},{key:"socketExec",value:function(e){if(window.GM&&GM.socket_RJ){GM.socket_RJ.exec&&GM.socket_RJ.exec(e);var t=GM.socket_RJ.getMoney;t&&t()>0&&Sail.io.emit(GAME_CMDS.QUERY_USER_INFO,null,"ajax")}}},{key:"onOpened",value:function(){Laya.SoundManager.playSound("sound/"+this.resFlag+".mp3"),c[this.resFlag].status="enter",c[this.resFlag].play("enter",!1,!0),h[this.resFlag+"Ani"].play(0,!1),this.data.payback&&Laya.timer.once(1500,this,function(){Sail.director.popScene(new Alert.Insurance(this.data.payback))})}},{key:"onClosed",value:function(){c[this.resFlag].status="exit",c[this.resFlag].stop(),c[this.resFlag].removeSelf(),h.removeSelf(),Sail.io.publish(GAME_CMDS.GAME_RESET),this.socketExec(),this.socketExec({type:"buzhongxian"})}}]),t}(Laya.Dialog);Sail.class(p,"Alert.Result")},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=Laya.Event.CLICK,u=(Laya.Event.STOPPED,Sail.Utils),c=null,h=[{cmd:GAME_CMDS.GET_RANK_BET,selectedIndex:0,param:{type:"day"}},{cmd:GAME_CMDS.GET_RANK_BET,selectedIndex:0,param:{type:"week"}},{cmd:GAME_CMDS.GET_RANK_BET,selectedIndex:0,param:{type:"month"}},{cmd:GAME_CMDS.GET_RANK_PRIZE,selectedIndex:1,param:null},{cmd:GAME_CMDS.GET_RANK_MINE,selectedIndex:2,param:null}],f={"大":"高能量","小":"低能量","豹子":"超能量"},p=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.enableClick=!0,e.curIndex=-1,e.ACTIONS=null,e.init(),e}return o(t,e),s(t,[{key:"init",value:function(){var e;c||(c=u.createSkeleton("res/alert/rank/loading"),c.pos(300,250)),this.rankTab.selectHandler=new Laya.Handler(this,this.onTabSelected),this.rankList.renderHandler=new Laya.Handler(this,this.onRankListRender),this.rankMineLogin.on(l,this,function(){location.href=GM.userLoginUrl}),this.ACTIONS=(e={},i(e,GAME_CMDS.GET_RANK_BET,this.updateRank),i(e,GAME_CMDS.GET_RANK_PRIZE,this.updateRank),i(e,GAME_CMDS.GET_RANK_MINE,this.updateRank),i(e,GAME_CMDS.NO_LOGIN,this.updateRank),i(e,GAME_CMDS.NET_ERROR,this.netError),i(e,GAME_CMDS.RANK_NO_DATA,this.updateRank),i(e,GAME_CMDS.RANK_RICH_NODATA,this.updateRich),i(e,GAME_CMDS.GET_RANK_RICH,this.updateRich),e),Sail.io.register(this.ACTIONS,this),c.play(0,!0),this.contentWrap.addChild(c),this.rankTab.selectedIndex=0,this.richList.array=[],Sail.io.emit(GAME_CMDS.GET_RANK_RICH,null,"ajax")}},{key:"onTabSelected",value:function(e){if(!this.enableClick)return void(this.rankTab.selectedIndex=this.curIndex);this.enableClick=!1,this.rankNodata.visible=!1,this.curIndex=e,this.rankList.array=[],this.rankPrize.array=[],this.rankMine.array=[],this.rankCon.selectedIndex=h[e].selectedIndex,c.visible=!0,c.play(0,!0),Sail.io.emit(h[e].cmd,h[e].param,"ajax")}},{key:"netError",value:function(e,t){for(var n in this.ACTIONS)if(n==t)return void(this.enableClick=!0)}},{key:"updateRich",value:function(e){var t=e.list;if(t&&t.length>0){for(var n in t)t[n].userName=t[n].disName,t[n].rank=t[n].rank-1,t[n].coin=t[n].prize_amount;this.richList.visible=!0,this.richList.array=t}else this.richNodata.visible=!0}},{key:"updateRank",value:function(e,t){switch(t){case GAME_CMDS.GET_RANK_BET:var n=e.list||[];for(var i in n)n[i].userName=n[i].nickname,n[i].trendIcon=3-n[i].rank_trend,n[i].rankIcon=n[i].rank-1,n[i].coin=0|n[i].amount;this.rankList.array=n,0==n.length&&(this.rankNodata.visible=!0);break;case GAME_CMDS.GET_RANK_PRIZE:var r=e.list||[];for(var a in r)r[a].userName=r[a].disName,r[a].coin=r[a].prize_amount,r[a].result=f[r[a].result];this.rankPrize.array=r,0==r.length&&(this.rankNodata.visible=!0);break;case GAME_CMDS.GET_RANK_MINE:if("nologin"==e)this.rankMineLogin.visible=!0,this.rankMine.visible=!1;else{var o=e.list||[];for(var s in o)o[s].coin=o[s].prize_amount,o[s].time=o[s].raw_add_time,o[s].result=f[o[s].result];this.rankMine.array=o,this.rankMineLogin.visible=!1,this.rankMine.visible=!0,0==o.length&&(this.rankNodata.visible=!0)}}c.visible=!1,c.stop(),this.enableClick=!0}},{key:"onRankListRender",value:function(e,t){var n=e.getChildByName("rankIcon");n.visible=t<3}},{key:"onClosed",value:function(){Sail.io.unregister(this.ACTIONS),this.ACTIONS=null,c.stop(),c.removeSelf()}}]),t}(ui.Alert.RankUI);Sail.class(p,"Alert.Rank")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Laya.Event.CLICK,l=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.selfConfig=e,n.init(),n}return a(t,e),o(t,[{key:"init",value:function(){this.update(),this.resize(),this.bindEvent()}},{key:"update",value:function(){this.alertMsg.style.align="center",this.alertMsg.style.fontSize=32,this.alertMsg.innerHTML=this.selfConfig.msg}},{key:"resize",value:function(){this.alertMsg.height=this.alertMsg.contentHeight,this.height=this.alertMsg.height+this.alertMsg.y+180}},{key:"bindEvent",value:function(){this.btnClose.on(s,this,this.close),this.btnConfirm.on(s,this,function(){this.selfConfig.close&&this.selfConfig.close(),this.close()})}}]),t}(ui.Alert.PublicUI);Sail.class(l,"Alert.Public")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Laya.Event.CLICK,l=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.data=e,n.init(),n}return a(t,e),o(t,[{key:"init",value:function(){this.insuranceMsg.text="很可惜，猜错了～获得平安娱乐险，使用后将返还"+this.data.paybackPoint+"分",this.btnClose.on(s,this,this.close),this.btnUse.on(s,this,function(){Sail.io.emit(GAME_CMDS.USE_PROP,{confirm:confirm,code:this.data.code},"ajax"),Sail.director.closeAll()})}}]),t}(ui.Alert.InsuranceUI);Sail.class(l,"Alert.Insurance")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Laya.Event.CLICK,l=Laya.Event.FOCUS,u=["10","50","100","500"],c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.init(),e}return a(t,e),o(t,[{key:"init",value:function(){var e=this.rechargeTab.items;for(var t in e)e[t].getChildByName("value").text=u[t]+"元";this.rechargeValue.on(l,this,this.showKeyboard),this.btnRecharge.on(s,this,this.recharge),this.rechargeTab.selectHandler=new Laya.Handler(this,function(e){-1!=e&&(this.rechargeValue.text=u[e])})}},{key:"onKeyboardInput",value:function(e){this.rechargeValue.text=e;for(var t in u)if(u[t]==e)return void(this.rechargeTab.selectedIndex=t);this.rechargeTab.selectedIndex=-1}},{key:"showKeyboard",value:function(){var e={length:8,input:this.onKeyboardInput.bind(this),close:function(e,t){"confirm"===e&&this.onKeyboardInput(t)}.bind(this)};Sail.keyboard.enter(this.rechargeValue.text,e)}},{key:"recharge",value:function(){if(this.rechargeValue.text){var e="/?act=payment&gameId="+gameId+"&tradeName="+tradeName+"&amount="+this.rechargeValue.text+"&platform="+platform+"&redirect_uri="+redirect_uri;window.location.href=e}}}]),t}(ui.Alert.RechargeUI);Sail.class(c,"Alert.Recharge")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Laya.Event.CLICK,l=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="faq",e.group="help",e.init(),e}return a(t,e),o(t,[{key:"init",value:function(){this.mainPanel.vScrollBarSkin="",this.btnClose.on(s,this,this.close),this.btnSkip.on(s,this,this.close)}},{key:"onOpened",value:function(){console.log("Faq opened")}},{key:"onClosed",value:function(){console.log("Faq closed")}}]),t}(ui.Alert.FaqUI);Sail.class(l,"Alert.Faq")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=(Laya.Event.CLICK,!1),l=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.initVoice(),e}return a(t,e),o(t,[{key:"initVoice",value:function(){var e=!!SOUNDSTATUS.CUR;this.stateDisabled.visible=!e,this.stateEnabled.visible=e,1!=s&&(s=!0,Laya.SoundManager.musicMuted=!e,Laya.SoundManager.soundMuted=!e)}},{key:"setVoiceStatus",value:function(){switch(SOUNDSTATUS.CUR){case SOUNDSTATUS.ON:SOUNDSTATUS.CUR=SOUNDSTATUS.OFF,Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,Laya.SoundManager.stopAllSound();break;case SOUNDSTATUS.OFF:SOUNDSTATUS.CUR=SOUNDSTATUS.ON,Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1}this.initVoice()}}]),t}(ui.Game.BtnSoundUI);Sail.class(l,"Com.Game.BtnSound")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Laya.Event.CLICK,l=Laya.Event.COMPLETE,u=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.showFlag=!1,e.isAnimation=!1,e.init(),e}return a(t,e),o(t,[{key:"init",value:function(){this.anchorX=.5,this.anchorY=.5,this.alpha=0,this.pos(1205,48),this.scale(1.5,1.5),this.enterAni.on(l,this,this.setFlag),this.exitAni.on(l,this,this.setFlag),this.btnMenu.on(s,this,this.switchOpen),this.bg.on(s,this,this.switchOpen),this.btnFaq.on(s,this,function(){this.isAnimation||(Laya.SoundManager.playSound("sound/btn.mp3"),Sail.director.popScene(new Alert.Faq),this.switchOpen())}),this.btnSound.on(s,this,function(){this.isAnimation||(Laya.SoundManager.playSound("sound/btn.mp3"),this.btnSound.setVoiceStatus(),this.switchOpen())}),Laya.stage.on(s,Laya.stage,function(e){e.showFlag&&(e.bg.hitTestPoint(this.mouseX,this.mouseY)||e.switchOpen())},[this])}},{key:"switchOpen",value:function(){this.isAnimation||(this.showFlag?this.exitAni.play(0,!1):(Laya.SoundManager.playSound("sound/btn.mp3"),this.enterAni.play(0,!1)),this.isAnimation=!0)}},{key:"setFlag",value:function(){this.showFlag=!this.showFlag,this.isAnimation=!1}},{key:"enter",value:function(){Laya.Tween.to(this,{scaleX:1,scaleY:1,alpha:1},160,null,null,800)}}]),t}(ui.Game.MenuUI);Sail.class(u,"Com.Game.Menu")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=['{{if type == "dice"}}','<span style="color:#98ff66">{{disName}}</span><span style="color:#ffffff">正在打杀，大家赶紧来膜拜吧。</span>','{{else if type == "payback"}}','<span style="color:#ff6a18">{{disName}}使用平安娱乐险,免除{{prize_amount}}损失</span>',"{{else}}",'<span style="color:#dff8ff">恭喜</span><span href="#" style="color:#98ff66">{{disName}}</span><span style="color:#dff8ff">赢得超能量，获得</span><span href="#" style="color:#ffd632">{{prize_amount}}</span><span style="color:#dff8ff">分。</span>',"{{/if}}"].join(""),l=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.notify=null,e.init(),e}return a(t,e),o(t,[{key:"init",value:function(){this.top=103,this.left=120,this.alpha=0,Sail.io.register(GAME_CMDS.GET_NOTIFY,this,this.update);var e={width:380,fontSize:20,tpl:s,complete:function(){Sail.io.emit(GAME_CMDS.GET_NOTIFY,null,"ajax")}};this.notify=new Tools.Notify(e),this.notify.pos(40,13),this.addChild(this.notify),Sail.io.emit(GAME_CMDS.GET_NOTIFY,null,"ajax")}},{key:"update",value:function(e){this.notify.add(e.list)}},{key:"enter",value:function(){Laya.Tween.to(this,{left:20,alpha:1},250,null,null,1080)}}]),t}(ui.Game.NotifyUI);Sail.class(l,"Com.Game.Notify")},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=Laya.Event.CLICK,u=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.menu=null,i.betValue=0,i.init(e,n),i}return o(t,e),s(t,[{key:"init",value:function(e){var t;this.centerX=0;var n=(t={},i(t,GAME_CMDS.QUERY_USER_INFO,this.update),i(t,GAME_CMDS.PLAY,this.onResult),i(t,GAME_CMDS.GAME_BET_VALUE,this.onBet),t);Sail.io.register(n,this),this.btnRecharge.on(l,this,function(){Sail.checkLogin()&&(Laya.SoundManager.playSound("sound/btn.mp3"),Sail.director.popScene(new Alert.Recharge))}),this.btnRank.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.director.popScene(new Alert.Rank)}),this.btnNotice.on(l,this,function(){window.GM&&GM.noticePopShow_out&&(Laya.SoundManager.playSound("sound/btn.mp3"),GM.noticePopShow_out())}),this.showGameScore.on(l,this,function(){window.GM&&1===GM.isCall_out&&GM.popBalanceShow_out&&(Laya.SoundManager.playSound("sound/btn.mp3"),this.noticeDot.visible=!1,GM.popBalanceShow_out())}),this.btnBack.on(Laya.Event.CLICK,null,function(){Laya.SoundManager.playSound("sound/btn.mp3"),GM.btnBackCall_out()}),this.btnHome.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),location.href=GM.backHomeUrl}),window.GM&&1===GM.isCall_out&&GM.noticeStatus_out&&GM.noticeStatus_out(function(e){e=e||{},e.isShowNotice&&(this.btnNotice.visible=!0),e.isShowRedPoint&&(this.noticeDot.visible=!0)}.bind(this)),window.GM&&1===GM.isCall_out&&GM.isShowBtnBack_out&&GM.btnBackCall_out&&(this.btnBack.visible=!0),""!=GM.backHomeUrl&&(this.btnHome.disabled=!1),this.menu=new Com.Game.Menu,this.addChild(this.menu)}},{key:"update",value:function(e){this.tCoin.text=e.TCoin,this.gameScore.text=e.gameScore}},{key:"onBet",value:function(e){console.log("header onBetValue"),this.betValue=e}},{key:"onResult",value:function(e){var t=0|this.tCoin.text,n=0|this.gameScore.text;e.prizeAmount>=0&&(t>=this.betValue?(this.tCoin.text=t-this.betValue,this.gameScore.text=n+e.prizeAmount):this.gameScore.text=n-this.betValue+e.prizeAmount)}},{key:"enter",value:function(){this.enterAni.play(0,!1),this.menu.enter()}}]),t}(ui.Game.HeaderUI);Sail.class(u,"Com.Game.Header")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},l=Sail.Utils,u=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.proBG=null,e.proBar=null,e.star=null,e.init(),e}return a(t,e),o(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,!0),this.proBG=null,this.proBar=null,this.rate=null,this.star=null}},{key:"init",value:function(){this.size(920,20),this.centerX=0,this.bottom=110;var e=new Laya.Image("res/start/start_pro_bg.png");e.sizeGrid="10,15,10,15",e.size(this.width+2,this.height+2),e.pos(-1,-1);var t=new Laya.Image("res/start/start_pro_bar.png");t.sizeGrid="9,15,9,15",t.size(0,this.height);var n=l.createSkeleton("res/start/star");n.visible=!1,n.pos(0,10),n.play(0,!0),this.proBG=e,this.proBar=t,this.star=n,this.addChildren(e,t,n)}},{key:"onProgress",value:function(e){this.proBar.width=this.width*e,this.star.x=this.proBar.width}},{key:"load",value:function(e,t){this.star.visible=!0,Laya.loader.load(e,Laya.Handler.create(this,function(){t()},[t]),new Laya.Handler(this,this.onProgress))}}]),t}(Laya.Box);Laya.class(u,"Com.Start.MainLoad")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},l=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.proBG=null,e.proBar=null,e.init(),e}return a(t,e),o(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,!0),this.proBG=null,this.proBar=null}},{key:"init",value:function(){this.size(830,10),this.centerX=0,this.bottom=50;var e=new Laya.Image("res/start/preload_pro_bg.png");e.sizeGrid="5,6,5,6",e.size(this.width,this.height);var t=new Laya.Image("res/start/preload_pro_bar.png");t.sizeGrid="5,6,5,6",t.size(0,this.height),this.proBG=e,this.proBar=t,this.addChildren(e,t)}},{key:"load",value:function(e,t){Laya.loader.load(e,Laya.Handler.create(this,function(){t()},[t]),new Laya.Handler(this,function(e){this.proBar.width=this.width*e}))}}]),t}(Laya.Box);Sail.class(l,"Com.Start.PreLoad")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Sail.Utils,l=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.proPreLoad=null,e.proMainLoad=null,e.BGStaticImg=null,e.iconBet=null,e.BGMain=null,e.BGAni=null,e.notice=null,e.size(Laya.stage.width,Laya.stage.height),e}return a(t,e),o(t,[{key:"init",value:function(){this.size(Laya.stage.width,Laya.stage.height),Sail.io.register(GAME_CMDS.QUERY_USER_INFO,this,this.checkLogin),Sail.io.emit(GAME_CMDS.QUERY_USER_INFO,null,"ajax"),this.showStaticProgress(),this.proPreLoad.load(ASSETS.START,this.showMainView.bind(this))}},{key:"showStaticProgress",value:function(){var e=new Laya.Image("res/start/start_bg.jpg");e.centerY=0;var t=new Laya.Image("res/start/preload_img.png");t.centerX=0,t.centerY=0;var n=new Laya.Image("res/start/icon_beta.png");n.x=600,n.centerY=-285,n.zOrder=10,e.addChild(n);var i=new Com.Start.PreLoad;this.BGMain=e,this.iconBet=n,this.BGStaticImg=t,this.proPreLoad=i,this.addChildren(e,t,i)}},{key:"showMainView",value:function(){this.BGStaticImg.removeSelf(),this.proPreLoad.removeSelf();var e=s.createSkeleton("res/start/start_ani");e.pos(this.BGMain.width/2,this.BGMain.height/2),e.play(0,!0);var t=new Laya.Image("res/start/notice.png");t.centerX=0,t.bottom=20;var n=new Com.Start.MainLoad;this.BGAni=e,this.notice=t,this.proMainLoad=n,this.BGMain.addChild(e),this.addChildren(t,n),n.load(ASSETS.GAME,function(){Sail.director.runScene(new Scene.Game)})}},{key:"checkLogin",value:function(e,t){console.log(e,t),USER_LOGIN_STATUS=!0,USER_DEFAULT_INFO=e}},{key:"onEnter",value:function(){Laya.loader.load(ASSETS.PRELOAD,Laya.Handler.create(this,this.init))}},{key:"onExit",value:function(){this.destroy(!0),this.proPreLoad=null,this.proMainLoad=null,this.BGStaticImg=null,this.iconBet=null,this.BGMain=null,this.BGAni=null,this.notice=null,Sail.io.unregister(GAME_CMDS.QUERY_USER_INFO,this.checkLogin)}},{key:"onResize",value:function(e,t){this.height=t}}]),t}(Sail.Scene);Sail.class(l,"Scene.Start")},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=Laya.Event.CLICK,u=!1,c=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.maxValue=0,e.gameScore=0,e.TCoin=0,e.init(),e}return o(t,e),s(t,[{key:"init",value:function(){var e;this.left=15,this.bottom=5;var t=(e={},i(e,GAME_CMDS.QUERY_USER_INFO,this.update),i(e,GAME_CMDS.PLAY,this.onResult),e);Sail.io.register(t,this),this.btnDecrease.on(l,this,this.calc,["decrease"]),this.btnIncrease.on(l,this,this.calc,["increase"]),this.btnMax.on(l,this,this.calc,["max"]),this.btnRecharge.on(l,this,function(){Sail.checkLogin()&&(Laya.SoundManager.playSound("sound/btn.mp3"),Sail.director.popScene(new Alert.Recharge))}),this.betValue.on(l,this,this.showKeyboard)}},{key:"showKeyboard",value:function(){var e={input:this.calc.bind(this,"keyboard"),close:function(e,t){"confirm"==e&&this.calc("keyboard",t,!0)}.bind(this)};Sail.keyboard.enter(this.betValue.text,e)}},{key:"calc",value:function(e,t,n){if(Sail.checkLogin()){var i=100,r=0|this.betValue.text;switch("max"==e&&(r=this.maxValue),i=r<1e4?100:r<1e5?5e3:1e4,e){case"increase":r+=i,r>=5e5&&(r=5e5);break;case"decrease":r-=i,r<=100&&(r=100);break;case"max":r=this.maxValue,r-=r%i;break;case"keyboard":r=100*(t/100|0),r<100&&(r=100),r>5e5&&n&&(r=5e5,Sail.director.popScene(new Alert.Public({msg:'<span style="color:#64cee5">超出最大投币额！</span>'})))}"keyboard"!=e&&Laya.SoundManager.playSound("sound/btn.mp3"),this.betValue.text=r,Sail.io.publish(GAME_CMDS.GAME_BET_VALUE,r)}}},{key:"update",value:function(e){if(this.gameScore=e.gameScore,this.TCoin=e.TCoin,this.maxValue=Math.max(e.gameScore,e.TCoin),this.maxValue=100*(this.maxValue/100|0),this.maxValue=Math.min(this.maxValue,5e5),USER_LOGIN_STATUS&&!u){u=!0;var t=Math.max(e.gameScore,e.TCoin);t=100*Math.ceil(t/1e4),t=t>1e4?1e4:t,t=t<100?100:t,this.betValue.text=t,Sail.io.publish(GAME_CMDS.GAME_BET_VALUE,t),Laya.timer.once(2e3,this,function(e){var t='<span style="color:#529eaf;font-size:24px;">（点击投币区域可设置投币额）</span><br><span style="display:none;">1</span><br><span style="color:#64cee5">土豪，您当前的默认投币额为</span><span style="color:#ffd632">'+e+"</span>";"1"==isNewUser?Sail.director.popScene(new Alert.Faq,{onClosed:function(){Sail.director.popScene(new Alert.Public({msg:t}))}}):Sail.director.popScene(new Alert.Public({msg:t}))},[t])}}},{key:"onResult",value:function(e){0!=e.prizeAmount&&(this.gameScore+=e.prizeAmount,this.maxValue=Math.max(this.gameScore,this.TCoin),this.maxValue=100*(this.maxValue/100|0),this.maxValue=Math.min(this.maxValue,5e5))}},{key:"enter",value:function(){this.enterAni.play(0,!1)}}]),t}(ui.Game.BetUI);Sail.class(c,"Com.Game.BetCtrl")},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=Laya.Event.CLICK,u=Laya.Event.STOPPED,c=Sail.Utils,h=[{name:"small",skin:"res/game/play/btn_info_1.png"},{name:"same",skin:"res/game/play/btn_info_2.png"},{name:"large",skin:"res/game/play/btn_info_3.png"}],f=!1,p=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.btnLists=[],e.init(),e}return o(t,e),s(t,[{key:"init",value:function(){var e;this.right=15,this.bottom=5;var t=(e={},i(e,GAME_CMDS.GAME_RESET,this.reset),i(e,GAME_CMDS.NET_ERROR,this.netError),e);Sail.io.register(t,this);for(var n in h){var r=this.getChildByName(h[n].name);this.btnLists.push(r),this.setBtnAni(r,h[n].skin)}}},{key:"setBtnAni",value:function(e,t){var n=c.createSkeleton("res/game/play/btn_play",null,1);n.pos(e.width/2,e.height/2),n.setSlotSkin("btn_info",Laya.loader.getRes(t)),n.play("loop",!0),e.btnStatus="loop",e.on(l,e,this.onClick),e.addChild(n)}},{key:"onClick",value:function(){if(Sail.checkLogin()&&!f){f=!0,Laya.SoundManager.playSound("sound/btn.mp3");var e=this.getChildAt(0);e.play("click",!1),e.once(u,e,function(){this.play("selected",!0)}),Laya.timer.once(1e3,this,function(){Sail.io.publish(GAME_CMDS.EMIT_PLAY_DATA,this.name)})}}},{key:"reset",value:function(e,t){for(var n in this.btnLists)this.btnLists[n].getChildAt(0).play("loop",!0);f=!1}},{key:"netError",value:function(e,t){t==GAME_CMDS.EMIT_PLAY_DATA&&this.reset()}},{key:"enter",value:function(){this.enterAni.play(0,!1)}}]),t}(ui.Game.PlayUI);Sail.class(p,"Com.Game.PlayCtrl")},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=Sail.Utils,u=(Laya.Event.CLICK,Laya.Event.STOPPED),c={1:[[66,62]],2:[[51,37],[81,88]],3:[[36,12],[66,63],[95,113]],4:[[21,38],[81,38],[50,88],[110,88]],5:[[35,12],[95,12],[66,62],[35,113],[95,113]],6:[[21,13],[81,13],[52,63],[110,63],[21,113],[81,113]]},h=function(){var e=[],t=function(t){function n(e){r(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.blockAni=null,t.init(),t.reset(e),t}return o(n,t),s(n,[{key:"init",value:function(){this.size(58,65);var e=l.createSkeleton("res/game/result/block");e.pos(this.width/2,this.height/2),this.blockAni=e,this.addChild(e)}},{key:"reset",value:function(e){return this.alpha=0,this.pos(e[0],e[1]+200),this.blockAni.play("loop",!0),Laya.Tween.to(this,{y:e[1],alpha:1},300,Laya.Ease.backOut,null,100*Math.random()|0),this}},{key:"recover",value:function(){this.blockAni.stop(),Laya.Tween.to(this,{y:this.y+200,alpha:0},300,Laya.Ease.backIn,Laya.Handler.create(this,function(){this.removeSelf(),e.push(this)}),100*Math.random()|0)}}]),n}(Laya.Box);return t.create=function(n){return 0!==e.length?(console.log("create from pool"),e.pop().reset(n)):(console.log("create from constructor"),new t(n))},t}(),f=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.screenAni=null,e.screenValue=null,e.init(),e}return o(t,e),s(t,[{key:"init",value:function(){this.size(90,90),this.pos(160,269);var e=l.createSkeleton("res/game/result/screen");e.pos(this.width/2,this.height/2),e.on(u,e,function(){"exit"!=this.status&&this.play("loop",!0)});var t=new Laya.Label;t.align="center",t.font="font_power",t.size(this.width,66),t.pivot(t.width/2,t.height/2),t.pos(this.width/2,this.height/2),t.scale(3,3),t.alpha=0,this.screenAni=e,this.screenValue=t,this.addChildren(e,t)}},{key:"enter",value:function(e){this.screenValue.text=e,Laya.timer.once(800,this,function(){Laya.Tween.to(this.screenValue,{scaleX:1,scaleY:1,alpha:1},300,Laya.Ease.backOut,null,700),this.screenAni.status="enter",this.screenAni.play("enter",!1)})}},{key:"exit",value:function(){Laya.Tween.to(this.screenValue,{scaleX:3,scaleY:3,alpha:0},420,Laya.Ease.backOut,null,420),this.screenAni.status="exit",this.screenAni.play("exit",!1)}}]),t}(Laya.Box),p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.blockArea=null,n.energyAni=null,n.energyArea=null,n.screenArea=null,n.loopIndex=0,n.blockLists=[],n.delay=100,n.init(e),n}return o(t,e),s(t,[{key:"init",value:function(e){this.size(410,430),this.index=e,this.centerX=410*(e-1),1===this.index&&(this.delay=0);var t=new Laya.Box;t.size(190,190),t.centerX=0,t.y=52;var n=new Laya.Box;n.size(this.width,135),n.pivot(n.width/2,100),n.pos(n.width/2+134*(e-1),389),n.alpha=0,n.scale(1.2,1.2);var i=l.createSkeleton("res/game/result/pool");i.pos(n.width/2,n.height),i.curAniName="enter",i.play("enter",!1),i.on(u,this,function(){switch(this.energyAni.curAniName){case"enter":this.energyAni.curAniName="waiting",this.energyAni.play("waiting",!0);break;case"lottery_drawing":this.energyAni.curAniName="lottery_result",this.energyAni.play("lottery_result",!0)}}),i.paused(),i.index=0,n.addChild(i),this.screenArea=new f,this.blockArea=t,this.energyAni=i,this.energyArea=n,this.addChildren(t,n,this.screenArea)}},{key:"enter",value:function(e){Laya.Tween.to(this.energyArea,{scaleX:1,scaleY:1,alpha:1,x:this.energyArea.width/2},370,null,Laya.Handler.create(this,function(){Laya.timer.once(this.delay,this,function(){this.energyAni.resume()})}),this.delay)}},{key:"play",value:function(){Laya.timer.once(this.delay,this,function(){this.energyAni.curAniName="lottery_waiting",this.energyAni.play("lottery_waiting",!0)})}},{key:"draw",value:function(e){Laya.timer.once(this.delay,this,function(){this.energyAni.curAniName="lottery_drawing",this.energyAni.play("lottery_drawing",!1)}),Laya.timer.once(900,this,function(){var t=c[e];for(var n in t){var i=h.create(t[n]);this.blockArea.addChild(i),this.blockLists.push(i)}}),this.screenArea.enter(e)}},{key:"reset",value:function(e){Laya.timer.clearAll(this);for(var t in this.blockLists)this.blockLists[t].recover();this.blockLists.length=0,!e&&this.screenArea.exit(),this.energyAni.curAniName="waiting",this.energyAni.play("waiting",!0)}}]),t}(Laya.Box),y=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.uiLists=[],e.init(),e}return o(t,e),s(t,[{key:"init",value:function(){var e;this.size(1334,430),this.centerY=0;var t=(e={},i(e,GAME_CMDS.EMIT_PLAY_DATA,this.play),i(e,GAME_CMDS.GAME_RESET,this.reset),i(e,GAME_CMDS.NET_ERROR,this.netError),i(e,GAME_CMDS.PLAY,this.draw),e);Sail.io.register(t,this);for(var n=0;n<3;n++){var r=new p(n);this.uiLists.push(r),this.addChild(r)}}},{key:"netError",value:function(e,t){t==GAME_CMDS.EMIT_PLAY_DATA&&this.reset()}},{key:"play",value:function(){for(var e in this.uiLists)this.uiLists[e].play();Laya.SoundManager.playSound("sound/game_start.mp3",1,Laya.Handler.create(this,function(){Laya.SoundManager.playSound("sound/game_wait.mp3",0)}))}},{key:"draw",value:function(e){var t=e.value;if(t&&t.length==this.uiLists.length)for(var n in this.uiLists)this.uiLists[n].draw(t[n]);Laya.SoundManager.stopSound("sound/game_wait.mp3"),Laya.SoundManager.playSound("sound/game_result.mp3")}},{key:"reset",value:function(e){for(var t in this.uiLists)this.uiLists[t].reset(e)}},{key:"enter",value:function(){Laya.timer.once(210,this,function(){for(var e in this.uiLists)this.uiLists[e].enter()})}}]),t}(Laya.Box);Sail.class(y,"Com.Game.ResultCtrl")},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=Laya.Event.COMPLETE,u=!1,c=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.prizeScore=0,e.diff=0,e.startCount=0,e.init(),e}return o(t,e),s(t,[{key:"init",value:function(){var e;this.centerX=0,this.y=90,this.visible=!1;var t=(e={},i(e,GAME_CMDS.PLAY,this.enter),i(e,GAME_CMDS.GAME_RESET,this.exit),e);Sail.io.register(t,this),this.enterAni.on(l,this,this.winScoreAni)}},{key:"winScoreAni",value:function(){0!=this.prizeScore&&(this.startCount=0,this.diff=this.prizeScore/1e3*50|0,this.loop())}},{key:"loop",value:function(){this.startCount+=this.diff,this.startCount>=this.prizeScore?this.startCount=this.prizeScore:Laya.timer.once(50,this,this.loop),this.winScore.text=":"+this.startCount}},{key:"enter",value:function(e){this.prizeScore=e.prizeAmount,this.winScore.text=":0",Laya.timer.once(1500,this,function(){this.prizeScore>=0&&(u||(this.visible=!0,u=!0),this.enterAni.play(0,!1))})}},{key:"exit",value:function(){Laya.timer.clearAll(this),this.winScore.text=":"+this.prizeScore,this.exitAni.play(0,!1)}}]),t}(ui.Game.ResultCoinUI);Sail.class(c,"Com.Game.ResultPanel")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=Laya.Event.STOPPED,c=Sail.Utils,h=(s={},o(s,GAME_CMDS.EMIT_PLAY_DATA,function(e){var t=this.checkBetVal(this.betValue);if(t.length>0)return Sail.io.publish(GAME_CMDS.GAME_RESET,!0),void Sail.director.popScene(new Alert.Public({msg:'<span style="color:#64cee5">'+t+"</span>"}));var n={type:e,amount:this.betValue};this.lastGetGameResTime=Date.now(),Sail.io.emit(GAME_CMDS.GET_GAME_RESULT,n,"ajax")}),o(s,GAME_CMDS.GAME_BET_VALUE,function(e){this.betValue=e}),o(s,GAME_CMDS.GAME_RESET,function(){Laya.SoundManager.stopAllSound()}),o(s,GAME_CMDS.USE_PROP,function(e){Sail.director.popScene(new Alert.Public({msg:'<span style="color:#64cee5">平安娱乐险成功为您避免了</span><span style="color:#ffd632">'+e.paybackPoint+'</span><span style="color:#64cee5">损失</span>'}))}),o(s,GAME_CMDS.QUERY_USER_INFO,function(e){USER_LOGIN_STATUS=!0,USER_DEFAULT_INFO=null}),o(s,GAME_CMDS.GET_GAME_RESULT,function(e){if(e.prizeAmount>=0&&e.value.length>0){var t=Date.now()-this.lastGetGameResTime>3e3?0:3e3;Laya.timer.once(t,this,function(e){Sail.io.publish(GAME_CMDS.PLAY,e),Laya.timer.once(e.prizeAmount>0?3400:2e3,this,function(e){Sail.director.popScene(new Alert.Result(e))},[e])},[e])}else Sail.io.publish(GAME_CMDS.GAME_RESET,!0),Sail.director.popScene(new Alert.Public({msg:'<span style="color:#64cee5">网络异常，请稍后再试！</span>'}))}),s),f=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.BGImg=null,e.BGAni=null,e.betCtrl=null,e.playCtrl=null,e.resultCtrl=null,e.resultPanel=null,e.header=null,e.notify=null,e.logo=null,e.lastGetGameResTime=0,e.betValue=0,e.init(),e}return a(t,e),l(t,[{key:"init",value:function(){Laya.SoundManager.playMusic("sound/background.mp3"),this.size(Laya.stage.width,Laya.stage.height),Sail.io.register(h,this);var e=new Laya.Image("res/game/bg/game_bg.jpg");e.anchorX=.5,e.anchorY=.5,e.pos(Laya.stage.width/2,Laya.stage.height/2);var t=c.createSkeleton("res/game/bg/bg_ani");t.pos(e.width/2,e.height/2),t.play(0,!0),e.addChild(t),this.betCtrl=new Com.Game.BetCtrl,this.playCtrl=new Com.Game.PlayCtrl,this.resultCtrl=new Com.Game.ResultCtrl,this.resultPanel=new Com.Game.ResultPanel,this.header=new Com.Game.Header,this.notify=new Com.Game.Notify;var n=c.createSkeleton("res/game/head/logo");n.x=this.width/2,n.once(u,this,function(){this.logo.play("loop",!0);var e=new Laya.Image("res/start/icon_beta.png");e.alpha=0,e.size(73,39),e.pos(778,4),Laya.Tween.to(e,{alpha:1},500),this.addChild(e)}),this.logo=n,this.BGImg=e,this.BGAni=t,this.addChildren(e,this.resultCtrl,this.betCtrl,this.playCtrl,this.notify,this.resultPanel,this.header,this.logo),USER_DEFAULT_INFO?Sail.io.publish(GAME_CMDS.QUERY_USER_INFO,USER_DEFAULT_INFO):Sail.io.emit(GAME_CMDS.QUERY_USER_INFO,null,"ajax")}},{key:"checkBetVal",value:function(e){var t="";return/^\d*$/.test(e)?0==e?t="还木有投币，赶快投币再来点我吧！":e<100?t="最小投币额为100":e<=1e4?e%100!=0&&(t="投币额在100-10000之间,请输入100的整数倍"):e<=1e5?e%5e3!=0&&(t="投币额在10000-100000之间,请输入5000的整数倍"):e<=5e5?e%1e4!=0&&(t="投币额在100000-500000之间,请输入10000的整数倍"):e>5e5&&(t="最大投币额为500000"):t="投币金额必须是正整数",t}},{key:"onEnter",value:function(){Laya.Tween.from(this.BGImg,{scaleX:1.5,scaleY:1.5,alpha:0},300),this.header.enter(),this.betCtrl.enter(),this.playCtrl.enter(),this.resultCtrl.enter(),this.notify.enter(),Laya.timer.once(920,this,function(){this.logo.play("enter",!1)})}},{key:"onResize",value:function(e,t){this.size(e,t),this.BGImg.y=t/2}}]),t}(Sail.Scene);Sail.class(f,"Scene.Game")}]);